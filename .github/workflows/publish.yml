name: Publish Docker image

on:
  push:
    branches: [ 'main' ]
  workflow_dispatch:

jobs:
  build-and-push-image:
    - name: create env file
      run: |
        echo {{ secrets.ENV_FILE }} > .env
    - name: build and push image
      uses: MAD-Goat-Project/github-actions-workflows/.github/workflows/publish-docker.yml@main